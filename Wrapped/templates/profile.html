<html>
<head>
    {% load custom_tags%}
    {% load static %}
    <link href =" https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-..." crossorigin="anonymous">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">
</head>

<div class = "container">
<h2>{{ user.username }}'s Spotify Wraps</h2>
    <div class= "row">
        <h3 style = "font-weight: bold;">Short Term Wraps</h3>
    </div>
    <div class = "row" id = "length_title">
        {% if short_term_wraps %}
                {% regroup short_term_wraps by created_at.date as grouped_short_term_wraps %}
                {% for group in grouped_short_term_wraps %}
                    <div class="card">
                        <div class="card-body">
                        <h4 class="card-title" style = "font-weight: bold">{{ group.grouper }}</h4>
                            <br>
                        <img src="{% static 'images/spotify_logo.png' %}" class="card-img-top w-50" alt="...">
                          <br> <br>
                        <p class="card-text">Spotify Wrapped - 4 Weeks <br> Created on {{ group.grouper }}</p>
                          <a href="{% url 'view_wraps' %}?wrap_id={{ group.list.0.id }}"> <button class="button" type = "submit">View Wrap Details</button></a>
                      </div>
                    </div>
                {% endfor %}
        {% else %}
            <p>No short-term wraps available.</p>
        {% endif %}
    </div>
    <div class = "row">
        <h3 style = "font-weight: bold;">Medium Term Wraps</h3>
    </div>
    <div class = "row" id = "length_title">
        {% if medium_term_wraps %}
                {% regroup medium_term_wraps by created_at.date as grouped_medium_term_wraps %}
                {% for group in grouped_medium_term_wraps %}
                    <div class="card">
                        <div class="card-body">
                        <h4 class="card-title" style = "font-weight: bold">{{ group.grouper }}</h4>
                            <br>
                        <img src="{% static 'images/spotify_logo.png' %}" class="card-img-top w-50" alt="...">
                          <br> <br>
                        <p class="card-text">Spotify Wrapped - 6 Months <br> Created on {{ group.grouper }}</p>
                          <a href="{% url 'view_wraps' %}?wrap_id={{ group.list.0.id }}"> <button class="button" type = "submit">View Wrap Details</button></a>
                      </div>
                    </div>
                {% endfor %}
        {% else %}
            <p>No medium-term wraps available.</p>
        {% endif %}
    </div>
    <div class = "row" id = "length_title">
        <h3 style = "font-weight: bold;">Long Term Wraps</h3>
    </div>
    <div class = "row">
        {% if long_term_wraps %}
            <ul>
                {% regroup long_term_wraps by created_at.date as grouped_long_term_wraps %}
                {% for group in grouped_long_term_wraps %}
                    <div class="card">
                        <div class="card-body">
                        <h4 class="card-title" style = "font-weight: bold">{{ group.grouper }}</h4>
                            <br>
                        <img src="{% static 'images/spotify_logo.png' %}" class="card-img-top w-50" alt="...">
                          <br> <br>
                        <p class="card-text">Spotify Wrapped - All Time <br> Created on {{ group.grouper }}</p>
                          <a href="{% url 'view_wraps' %}?wrap_id={{ group.list.0.id }}"> <button class="button" type = "submit">View Wrap Details</button></a>
                      </div>
                    </div>
                {% endfor %}
            </ul>
        {% else %}
            <p>No long-term wraps available.</p>
        {% endif %}
    </div>
</div>
<button id="dark-mode-toggle" class="button">Toggle Dark Mode</button>

{% block content %}{% endblock %}

<script src="{% static 'dark-mode-toggle.js' %}"></script>

</html>