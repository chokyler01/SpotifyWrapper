<h2>Your Spotify Wrapped</h2>

<!-- Link to the user's profile -->
<a href="{% url 'profile' %}">View Profile</a>

{% if step == 1 %}
    <h3>Top Songs</h3>
    <ul>
        {% for track in top_tracks %}
            <li>
                {% if track.image_url %}
                    <img src="{{ track.image_url }}" alt="{{ track.name }}" width="50" height="50">
                {% endif %}
                <strong>{{ track.name }}</strong> by
                {% for artist in track.artists %}
                    {{ artist }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </li>
        {% endfor %}
    </ul>
    <a href="{% url 'view_wraps' %}?step=2">
        <button>Next: Top Artists</button>
    </a>

{% elif step == 2 %}
    <h3>Top Artists</h3>
    <ul>
        {% for artist in top_artists %}
            <li>
                {% if artist.image_url %}
                    <img src="{{ artist.image_url }}" alt="{{ artist.name }}" width="50" height="50">
                {% endif %}
                <strong>{{ artist.name }}</strong>
            </li>
        {% endfor %}
    </ul>
    <h4>Top Genres</h4>
    <ul>
        {% for genre, count in top_genres %}
            <li>{{ genre }} ({{ count }})</li>
        {% endfor %}
    </ul>
    <a href="{% url 'view_wraps' %}?step=3">
        <button>Next: Top Albums</button>
    </a>

{% elif step == 3 %}
    <h3>Top Albums</h3>
    <ul>
        {% for album in top_albums %}
            <li>
                {% if album.image_url %}
                    <img src="{{ album.image_url }}" alt="{{ album.name }}" width="50" height="50">
                {% endif %}
                <strong>{{ album.name }}</strong> by
                {% for artist in album.artists %}
                    {{ artist.name }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </li>
        {% endfor %}
    </ul>
    <a href="{% url 'view_wraps' %}?step=1">
        <button>Back to Top Songs</button>
    </a>
{% endif %}

